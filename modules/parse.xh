BEGIN {xh::defmodule('parse.xh', <<'_')}
(def (quote [@xs])             (str "[" (qw $xs) "]")
     (quote {@xs})             (str "{" (qw $xs) "}")
     (quote "@s")              (str "\\\"" (qw $s) "\\\"")
     (quote (re '^[@!$]$' $x)) (str "\\" $x)
     (quote !x)                (str @(match '^([@!\$]+)(.*)$' $x))
     (quote $x)                $x
     ^where (qw $xs) (join (re '^\s+$' $ws) (map quote $xs)))

(def (parse (quote $x)) $x)
_
