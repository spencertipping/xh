BEGIN {xh::defmodule('parse.xh', <<'_')}
(def (quote [@xs])               (str "[" (qw $xs) "]")
     (quote {@xs})               (str "{" (qw $xs) "}")
     (quote "@s")                (str "\\\"" (qw $s) "\\\"")
     (quote (re '^([@!$])$' $x)) (str "\\" $x)
     (quote !x)                  (qw @(re '^([@!\$]+)(.*)$' $x))
     (quote $x)                  $x

     ^where (qw $xs) (join " " (map quote $xs)))
_
